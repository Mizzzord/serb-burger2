# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Timeweb Cloud üåê

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Serb Burger** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ Timeweb Cloud: **Managed PostgreSQL** (–¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö) –∏ **Cloud Servers** (–¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).

---

## 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Managed PostgreSQL)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (DBaaS) –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±—ç–∫–∞–ø—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –ë–î.

1.  –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å [Timeweb Cloud](https://cloud.timeweb.com/).
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"** -> **"–°–æ–∑–¥–∞—Ç—å"**.
3.  –í—ã–±–µ—Ä–∏—Ç–µ **PostgreSQL 15**.
4.  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
    *   **–†–µ–≥–∏–æ–Ω**: –ú–æ—Å–∫–≤–∞ (–∏–ª–∏ –±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º).
    *   **–¢–∏–ø**: –û–±–ª–∞—á–Ω–∞—è –ë–î.
    *   **–¢–∞—Ä–∏—Ñ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞).
5.  –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
    *   –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –∏–º–µ–Ω–µ–º `serb_burger`.
    *   –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `serb_user`) –∏ –∑–∞–¥–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.
    *   **–í–∞–∂–Ω–æ**: –í —Ä–∞–∑–¥–µ–ª–µ "–î–æ—Å—Ç—É–ø" –≤–∫–ª—é—á–∏—Ç–µ **"–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø"** (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤) –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –≤ —Ç–æ–º –∂–µ —Ä–µ–≥–∏–æ–Ω–µ.
6.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **—Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** (Host, Port, User, Password). –û–Ω–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
    `postgresql://serb_user:password@rc1b-xxxxxx.mdb.yandexcloud.net:6432/serb_burger` (–≤ Timeweb –±—É–¥–µ—Ç –ø–æ—Ö–æ–∂–∏–π —Ñ–æ—Ä–º–∞—Ç).

---

## 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (VPS)

1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã"** -> **"–°–æ–∑–¥–∞—Ç—å"**.
2.  –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑: **Ubuntu 22.04**.
3.  –¢–∞—Ä–∏—Ñ: 1-2 —è–¥—Ä–∞ CPU, 2 –ì–ë RAM.
4.  **–í–∞–∂–Ω–æ**: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ —Ä–µ–≥–∏–æ–Ω, —á—Ç–æ –∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
5.  –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH:
    ```bash
    ssh root@IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê
    ```

---

## 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û:

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com | sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
apt install docker-compose-v2 -y

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞
git clone <URL_–í–ê–®–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>
cd serb-burger
```

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Timeweb:
```env
# URL –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –ø—É–Ω–∫—Ç–µ 1
DATABASE_URL="postgresql://serb_user:–≤–∞—à_–ø–∞—Ä–æ–ª—å@–∞–¥—Ä–µ—Å_–±–¥_timeweb:5432/serb_burger"

# –ü–ª–∞—Ç–µ–∂–∏ WATA
WATA_API_KEY="–≤–∞—à_–∫–ª—é—á"
WATA_SHOP_ID="–≤–∞—à_id"

# –ê–¥–º–∏–Ω–∫–∞
ADMIN_PASSWORD="–≤–∞—à_–ø–∞—Ä–æ–ª—å_–∞–¥–º–∏–Ω–∞"
JWT_SECRET="–ª—é–±–∞—è_—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞"

# –í–∞—à –¥–æ–º–µ–Ω (–Ω—É–∂–µ–Ω –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤ –∏ Telegram)
NEXT_PUBLIC_BASE_URL="https://serbskyburger.ru"
```

---

## 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d --build

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec -it serb-burger-app-1 npx prisma migrate deploy
```

---

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –î–æ–º–µ–Ω–∞ –∏ SSL (Nginx)

1.  –í –ø–∞–Ω–µ–ª–∏ Timeweb –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–î–æ–º–µ–Ω—ã"** –∏ –ø—Ä–∏–≤—è–∂–∏—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω –∫ IP —Å–µ—Ä–≤–µ—Ä–∞.
2.  –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx:
    ```bash
    apt install nginx -y
    ```
3.  –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ `/etc/nginx/sites-available/serb-burger`:
    ```nginx
    server {
        server_name serbskyburger.ru; # –í–∞—à –¥–æ–º–µ–Ω

        location / {
            proxy_pass http://localhost:3000;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_cache_bypass $http_upgrade;
        }
    }
    ```
4.  –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π:
    ```bash
    ln -s /etc/nginx/sites-available/serb-burger /etc/nginx/sites-enabled/
    rm /etc/nginx/sites-enabled/default
    nginx -t && systemctl restart nginx
    ```
5.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π SSL**:
    ```bash
    apt install certbot python3-certbot-nginx -y
    certbot --nginx -d app.serb-burger.ru
    ```

---

## 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

1.  –í @BotFather –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞ —É–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É: `https://serbskyburger.ru`.
2.  –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Mini App –≤ Telegram –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –æ–±–ª–∞–∫–æ Timeweb.

---
**–°–æ–≤–µ—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Firewall –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å IP –≤–∞—à–µ–≥–æ VPS —Å–µ—Ä–≤–µ—Ä–∞.

